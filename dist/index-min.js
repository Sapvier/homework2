class ThirdAnimation{constructor(t){this.animatedButton=t}initialize(){this.clickHandler()}clickHandler(){this.animatedButton[0].addEventListener("click",()=>{this.animatedButton[0].style.animationPlayState="running"}),this.animatedButton[1].addEventListener("click",()=>{this.animatedButton[1].style.animationPlayState="running"}),this.animatedButton[2].addEventListener("click",()=>{this.animatedButton[2].style.animationPlayState="running"}),this.animatedButton[3].addEventListener("click",()=>{this.animatedButton[3].style.animationPlayState="running"}),console.log(animatedButton)}}class ModalAnimation{constructor(t,e,n,i){this.modal=t,this.expandButton=e,this.declineButton=n,this.deleteButton=i}initialize(){this.expandModal(),this.closeModal()}expandModal(){this.expandButton.addEventListener("click",()=>{this.modal.style.display="flex",this.expandButton.style.display="none"}),console.log("click")}closeModal(){this.declineButton.addEventListener("click",()=>{this.modal.style.display="none",this.expandButton.style.display="block"}),this.deleteButton.addEventListener("click",()=>{this.modal.style.display="none",this.expandButton.style.display="block"})}}class FormValidator{constructor(t,e){this.form=t,this.fields=e}initialize(){this.validateOnSubmit(),this.validateOnEntry(),this.unlockButton(),this.showPassword(),this.validateOnKeyDown()}validateOnSubmit(){let t=document.querySelector(".submit-button");this.form.addEventListener("submit",e=>{e.preventDefault(),this.fields.forEach(e=>{const n=document.querySelector(`#${e}`);if(n.value=n.value.trim(),"password"===e)var i=this.validatePassword(n);else if("name"===e)var a=this.validateName(n);else var s=this.validateSelect(n);i||a||s?(t.style.animation="submitInvalid 1s",t.style.animationPlayState="running"):(t.style.animation="submitValid 1s",t.style.animationPlayState="running")})})}validateOnKeyDown(){this.form.onkeydown=(()=>this.validateOnSubmit())}validateOnEntry(){this.fields.forEach(t=>{const e=document.querySelector(`#${t}`);e.addEventListener("input",()=>{"password"===e.id?this.validatePassword(e):this.validateName(e)}),e.addEventListener("change",()=>{this.validateSelect(e)})})}validatePassword(t){let e=t.parentElement,n=t.parentElement.nextSibling,i=!1,a=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\w\s]).{8,}$/;return t.value.length<1?(e.classList.add("with-errors"),n.innerHTML="Required field",t.focus(),i=!0):"password"!==t.id||a.test(t.value)?"password"===t.id&&a.test(t.value)?(n.innerHTML="",e.classList.remove("with-errors"),i):void 0:(n.innerHTML="Password must contain at least 8 characters, including uppercase, lowercase letter and a number.",e.classList.add("with-errors"),t.focus(),i=!0)}validateName(t){t.value=t.value.trimStart().replace(/\s{2,}/g," "),t.value=t.value.replace(/[^a-zA-ZА-я\s0-9]/g,"");let e=t.parentElement,n=t.parentElement.nextSibling,i=!1;return t.value.length<1?(e.classList.add("with-errors"),n.innerHTML="Required field",i=!0,t.focus(),i):t.value.length>0&&"name"===t.id?(e.classList.remove("with-errors"),n.innerHTML="",i):void 0}validateSelect(t){let e=t.parentElement.nextSibling,n=!1;return"country"===t.value?(e.innerHTML="Required field",t.classList.add("with-errors"),n=!0):(t.classList.remove("with-errors"),e.innerHTML="",document.querySelector(".submit-button").focus(),n)}unlockButton(){let t=document.getElementById("terms"),e=document.querySelector(".submit-button");t.addEventListener("change",()=>{t.checked?(e.disabled=!1,e.classList.add("active")):(e.disabled=!0,e.style.backgroundColor="silver")})}showPassword(){let t=document.getElementById("eye"),e=document.getElementById("eye-slashed"),n=document.getElementById("password");t.addEventListener("click",()=>{n.attributes.type.value="text",t.style.display="none",e.style.display="block"}),e.addEventListener("click",()=>{n.attributes.type.value="password",t.style.display="block",e.style.display="none"})}}const form=document.querySelector("#form"),fields=["name","password","countries"],validator=new FormValidator(form,fields);validator.initialize();let modal=document.getElementById("expand-modal"),expandButton=document.getElementById("expand-button"),declineButton=document.getElementById("expand-button-decline"),deleteButton=document.getElementById("expand-button-delete"),animatedButton=document.getElementsByClassName("animated-button");const animateFirst=new ModalAnimation(modal,expandButton,declineButton,deleteButton);animateFirst.initialize();const animateThird=new ThirdAnimation(animatedButton);animateThird.initialize();