class FormValidator{constructor(e,t){this.form=e,this.fields=t}initialize(){this.validateOnSubmit(),this.validateOnEntry(),this.unlockButton(),this.showPassword()}validateOnSubmit(){this.form.addEventListener("submit",e=>{e.preventDefault(),this.fields.forEach(e=>{const t=document.querySelector(`#${e}`);t.value=t.value.trim(),this.validateFields(t)})})}validateOnEntry(){this.fields.forEach(e=>{const t=document.querySelector(`#${e}`);t.addEventListener("input",()=>{this.validateFields(t)}),t.addEventListener("select",()=>{this.validateFields(t)})})}validateFields(e){"password"===e.id?e.value=e.value.replace(/\s+/g,""):e.value=e.value.trimStart().replace(/\s{2,}/g," ");let t=e.parentElement,s=e.parentElement.nextSibling,i=e.value,r=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\w\s]).{8,}$/;i.length<1?(t.classList.add("with-errors"),s.innerHTML="Required field"):"country"===i?(s.innerHTML="Required field",e.classList.add("with-errors")):"country"!==i&&"countries"===e.id?(e.classList.remove("with-errors"),s.innerHTML=""):i.length>0&&"name"===e.id?(t.classList.remove("with-errors"),s.innerHTML=""):"password"!==e.id||r.test(e.value)?"password"===e.id&&r.test(e.value)&&(s.innerHTML="",t.classList.remove("with-errors")):(s.innerHTML="Password must contain at least 8 characters, including uppercase, lowercase letter and a number.",t.classList.add("with-errors"))}unlockButton(){let e=document.getElementById("terms"),t=document.querySelector("button");e.addEventListener("change",()=>{e.checked?(t.disabled=!1,t.style.backgroundColor="dodgerblue"):(t.disabled=!1,t.style.backgroundColor="silver")})}showPassword(){let e=document.getElementById("eye"),t=document.getElementById("eye-slashed"),s=document.getElementById("password");e.addEventListener("click",()=>{s.attributes.type.value="text",e.style.display="none",t.style.display="block"}),t.addEventListener("click",()=>{s.attributes.type.value="password",e.style.display="block",t.style.display="none"})}}const form=document.querySelector("#form"),fields=["name","password","countries"],validator=new FormValidator(form,fields);validator.initialize();