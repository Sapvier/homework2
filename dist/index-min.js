class FormValidator{constructor(e,t){this.form=e,this.fields=t}initialize(){this.validateOnSubmit(),this.validateOnEntry(),this.unlockButton(),this.showPassword(),this.validateName(),this.validatePassword(),this.validateSelect()}validateOnSubmit(){this.form.addEventListener("submit",e=>{e.preventDefault(),this.fields.forEach(e=>{const t=document.querySelector(`#${e}`);t.value=t.value.trim(),"password"===e?this.validatePassword(t):"name"===e?this.validateName(t):this.validateSelect(t)})})}validateOnEntry(){this.fields.forEach(e=>{const t=document.querySelector(`#${e}`);t.addEventListener("input",()=>{"password"===t.type?this.validatePassword(t):this.validateName(t)}),t.addEventListener("change",()=>{this.validateSelect(t)})})}validatePassword(e){let t=e.parentElement,a=e.parentElement.nextSibling,s=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\w\s]).{8,}$/;e.value.length<1?(t.classList.add("with-errors"),a.innerHTML="Required field"):"password"!==e.id||s.test(e.value)?"password"===e.id&&s.test(e.value)&&(a.innerHTML="",t.classList.remove("with-errors")):(a.innerHTML="Password must contain at least 8 characters, including uppercase, lowercase letter and a number.",t.classList.add("with-errors"))}validateName(e){e.value=e.value.trimStart().replace(/\s{2,}/g," "),e.value=e.value.replace(/[^a-zA-ZА-я\s0-9]/g,"");let t=e.parentElement,a=e.parentElement.nextSibling;e.value.length<1?(t.classList.add("with-errors"),a.innerHTML="Required field"):e.value.length>0&&"name"===e.id&&(t.classList.remove("with-errors"),a.innerHTML="")}validateSelect(e){let t=e.parentElement.nextSibling;"country"===e.value?(t.innerHTML="Required field",e.classList.add("with-errors")):(e.classList.remove("with-errors"),t.innerHTML="")}unlockButton(){let e=document.getElementById("terms"),t=document.querySelector(".submit-button");e.addEventListener("change",()=>{e.checked?(t.disabled=!1,t.classList.add("active")):(t.disabled=!0,t.style.backgroundColor="silver")})}showPassword(){let e=document.getElementById("eye"),t=document.getElementById("eye-slashed"),a=document.getElementById("password");e.addEventListener("click",()=>{a.attributes.type.value="text",e.style.display="none",t.style.display="block"}),t.addEventListener("click",()=>{a.attributes.type.value="password",e.style.display="block",t.style.display="none"})}}const form=document.querySelector("#form"),fields=["name","password","countries"],validator=new FormValidator(form,fields);validator.initialize();